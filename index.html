---
layout: page
description: "ã€Œç»„ä¸€è¾ˆå­ä¹é˜Ÿå§ï¼ã€"
---

<!-- æ·»åŠ å‡ ä½•å›¾å½¢èƒŒæ™¯CSS -->
<link rel="stylesheet" href="{{ '/css/geometry-background.css' | prepend: site.baseurl }}">

<!-- è‡ªåŠ¨åˆ·æ–°å†…å®¹è®¾ç½® -->
<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
<meta http-equiv="Pragma" content="no-cache">
<meta http-equiv="Expires" content="0">

<!-- æ·»åŠ è°·æ­ŒåŠ¨æ¼«é£æ ¼å­—ä½“ -->
<link href="https://fonts.googleapis.com/css2?family=Mochiy+Pop+One&family=Noto+Sans+SC:wght@400;700&display=swap" rel="stylesheet">

<!-- æ·»åŠ åˆ†é¡µå¯¼èˆªæ ·å¼ -->
<style>
    /* æ•´ä½“èƒŒæ™¯æ ·å¼ */
    body {
        background-attachment: fixed;
        position: relative;
        min-height: 100vh;
        background-image: url('https://i.loli.net/2021/09/14/5TB6poEjYqdJMQW.jpg');
        background-size: cover;
        background-position: center;
        font-family: 'Noto Sans SC', sans-serif;
    }
    
    /* é¡µé¢æ ‡é¢˜æ ·å¼ */
    .navbar-brand {
        font-family: 'Mochiy Pop One', sans-serif;
        color: #ff6b97 !important;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
    }
    
    /* å¯¼èˆªèœå•æ ·å¼ */
    .navbar-custom {
        background-color: rgba(255, 255, 255, 0.85);
        border-bottom: 2px solid #ff6b97;
    }
    
    .navbar-custom .nav li a {
        color: #7986cb;
        transition: all 0.3s ease;
    }
    
    .navbar-custom .nav li a:hover {
        color: #ff6b97;
        transform: translateY(-2px);
    }
    
    /* ä¸»é¡µå†…å®¹çš„å®¹å™¨ */
    .main-content-container {
        background-color: rgba(255, 255, 255, 0.85) !important;
        border-radius: 15px;
        border: 2px solid rgba(255, 182, 193, 0.6);
        backdrop-filter: blur(8px);
        -webkit-backdrop-filter: blur(8px);
        box-shadow: 0 4px 15px rgba(255, 107, 151, 0.2);
        padding: 25px;
        position: relative;
        z-index: 2;
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        margin-top: 20px;
    }
    
    .main-content-container:hover {
        transform: scale(1.01);
        box-shadow: 0 8px 24px rgba(255, 107, 151, 0.3);
    }
    
    /* å¡é€šé£æ ¼è£…é¥°å…ƒç´  */
    .main-content-container::before {
        content: "";
        position: absolute;
        top: -15px;
        left: 20px;
        width: 30px;
        height: 30px;
        background-color: #FF9CE3;
        border-radius: 50%;
        box-shadow: 0 0 0 5px rgba(255, 156, 227, 0.3);
        z-index: -1;
    }
    
    .main-content-container::after {
        content: "";
        position: absolute;
        bottom: -10px;
        right: 30px;
        width: 20px;
        height: 20px;
        background-color: #A7C7E7;
        border-radius: 50%;
        box-shadow: 0 0 0 4px rgba(167, 199, 231, 0.3);
        z-index: -1;
    }
    
    /* ä¸ºäº†è®©ä¸»é¡µå…¨å±æ•ˆæœæ›´å¥½çš„æ ·å¼ */
    .home-spacer {
        height: 0;
        width: 100%;
        display: none;
    }
    
    /* åˆ†é¡µå¯¼èˆªæ ·å¼ */
    .pagination {
        display: flex;
        justify-content: center;
        margin: 30px 0;
        padding: 10px;
        list-style: none;
        background-color: rgba(255, 255, 255, 0.8);
        border-radius: 12px;
        backdrop-filter: blur(5px);
        -webkit-backdrop-filter: blur(5px);
        border: 1px solid rgba(255, 182, 193, 0.5);
        transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
    
    .pagination:hover {
        transform: scale(1.02);
        box-shadow: 0 5px 15px rgba(255, 107, 151, 0.2);
    }
    
    .pagination li {
        margin: 0 5px;
    }
    
    .pagination li a,
    .pagination li span {
        display: block;
        padding: 8px 16px;
        border: 1px solid rgba(255, 182, 193, 0.5);
        color: #6c5ce7;
        text-decoration: none;
        border-radius: 8px;
        transition: all 0.3s ease;
        background-color: rgba(255, 255, 255, 0.7);
    }
    
    .pagination li a:hover {
        background-color: #ffdbf0;
        color: #333;
        transform: translateY(-2px);
        box-shadow: 0 3px 10px rgba(255, 107, 151, 0.2);
    }
    
    .pagination li.active span {
        background-color: #ff6b97;
        color: white;
        border-color: #ff6b97;
    }
    
    .pagination li.disabled span {
        color: #bbb;
        cursor: not-allowed;
        background-color: rgba(255, 255, 255, 0.5);
    }
    
    .page-count {
        text-align: center;
        margin-bottom: 20px;
        color: #6c5ce7;
        font-size: 14px;
        background-color: rgba(255, 255, 255, 0.8);
        padding: 10px;
        border-radius: 10px;
        backdrop-filter: blur(5px);
        -webkit-backdrop-filter: blur(5px);
        transition: transform 0.3s ease;
        border: 1px solid rgba(255, 182, 193, 0.5);
    }
    
    .page-count:hover {
        transform: scale(1.03);
    }
    
    /* æ–‡ç« é¢„è§ˆåŒºåŸŸ */
    .post-preview {
        background-color: rgba(255, 255, 255, 0.9);
        border-radius: 12px;
        padding: 20px;
        margin-bottom: 25px;
        backdrop-filter: blur(5px);
        -webkit-backdrop-filter: blur(5px);
        border: 1px solid rgba(255, 182, 193, 0.5);
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        position: relative;
    }
    
    .post-preview:hover {
        transform: scale(1.03);
        box-shadow: 0 8px 20px rgba(255, 107, 151, 0.2);
    }
    
    /* æ–‡ç« æ ‡é¢˜æ ·å¼ */
    .post-preview .post-title {
        color: #6c5ce7;
        font-weight: bold;
        transition: color 0.3s ease;
    }
    
    .post-preview:hover .post-title {
        color: #ff6b97;
    }
    
    /* æ–‡ç« å‰¯æ ‡é¢˜æ ·å¼ */
    .post-preview .post-subtitle {
        color: #8a8a8a;
    }
    
    /* æ–‡ç« å†…å®¹é¢„è§ˆ */
    .post-content-preview {
        color: #666;
        font-size: 15px;
        margin: 10px 0;
    }
    
    /* æ–‡ç« é¢„è§ˆè£…é¥°å…ƒç´  */
    .post-preview::before {
        content: "âœ¨";
        position: absolute;
        top: -5px;
        right: 20px;
        font-size: 20px;
        color: #ff6b97;
    }
    
    /* æ–‡ç« å…ƒä¿¡æ¯ */
    .post-meta {
        color: #a0a0a0;
        font-size: 13px;
        font-style: italic;
        border-top: 1px dashed rgba(255, 182, 193, 0.5);
        padding-top: 10px;
        margin-top: 15px;
    }
    
    /* æ°´å¹³åˆ†å‰²çº¿æ ·å¼ */
    hr {
        border: 0;
        height: 1px;
        background-image: linear-gradient(to right, rgba(255, 182, 193, 0), rgba(255, 182, 193, 0.75), rgba(255, 182, 193, 0));
        margin: 30px 0;
    }
    
    /* ç§»åŠ¨è®¾å¤‡é€‚é… */
    @media (max-width: 768px) {
        .main-content-container,
        .post-preview,
        .pagination,
        .page-count {
            transform: none !important;
            transition: box-shadow 0.3s ease;
        }
        
        .main-content-container {
            padding: 15px;
            margin-top: 10px;
        }
        
        .post-preview {
            padding: 15px;
            margin-bottom: 15px;
        }
    }
    
    /* åŠ¨ç”»æ•ˆæœ */
    @keyframes float {
        0% { transform: translateY(0px); }
        50% { transform: translateY(-8px); }
        100% { transform: translateY(0px); }
    }
    
    .floating-element {
        animation: float 5s ease-in-out infinite;
    }
</style>

<!-- ä¸»é¡µå†…å®¹å®¹å™¨ -->
<div class="main-content-container">
    <!-- èŒç³»è£…é¥°å…ƒç´  -->
    <div style="position: absolute; top: -30px; right: 30px; font-size: 40px; transform: rotate(10deg);" class="floating-element">ğŸŒ¸</div>
    <div style="position: absolute; bottom: -25px; left: 50px; font-size: 35px; transform: rotate(-5deg);" class="floating-element">âœ¨</div>
    
    <!-- é¡µé¢ä¿¡æ¯ -->
    <div class="page-count">
        {% if paginator.total_posts > 0 %}
        æ˜¾ç¤ºç¬¬ {{ paginator.page }}é¡µ / å…±{{ paginator.total_pages }}é¡µ (æ€»å…±{{ paginator.total_posts }}ç¯‡æ–‡ç« )
        {% endif %}
    </div>

    {% for post in paginator.posts %}
    <div class="post-preview">
        <a href="{{ post.url | prepend: site.baseurl }}">
            <h2 class="post-title">
                {{ post.title }}
            </h2>
            {% if post.subtitle %}
            <h3 class="post-subtitle">
                {{ post.subtitle }}
            </h3>
            {% endif %}
            <div class="post-content-preview">
                {% if post.lang == 'en' %}
                    {{ post.content | strip_html | truncate:300 }}
                {% else %}
                    {{ post.content | strip_html | truncate:200 }}
                {% endif %}
            </div>
        </a>
        <p class="post-meta">
            Posted by {% if post.author %}{{ post.author }}{% else %}{{ site.title }}{% endif %} on {{ post.date | date: "%B %-d, %Y" }}
        </p>
    </div>
    <hr>
    {% endfor %}

    <!-- å¢å¼ºçš„åˆ†é¡µå¯¼èˆª -->
    {% if paginator.total_pages > 1 %}
    <ul class="pagination">
        <!-- é¦–é¡µé“¾æ¥ -->
        <li {% if paginator.page == 1 %}class="disabled"{% endif %}>
            {% if paginator.page == 1 %}
            <span>&laquo;&laquo;</span>
            {% else %}
            <a href="{{ '/index.html' | prepend: site.baseurl }}">&laquo;&laquo;</a>
            {% endif %}
        </li>

        <!-- ä¸Šä¸€é¡µé“¾æ¥ -->
        <li {% if paginator.previous_page == nil %}class="disabled"{% endif %}>
            {% if paginator.previous_page %}
            <a href="{{ paginator.previous_page_path | prepend: site.baseurl | replace: '//', '/' }}">&laquo;</a>
            {% else %}
            <span>&laquo;</span>
            {% endif %}
        </li>

        <!-- é¡µç é“¾æ¥ -->
        {% assign start_page = paginator.page | minus: 2 %}
        {% if start_page < 1 %}
            {% assign start_page = 1 %}
        {% endif %}
        
        {% assign end_page = start_page | plus: 4 %}
        {% if end_page > paginator.total_pages %}
            {% assign end_page = paginator.total_pages %}
            {% assign start_page = end_page | minus: 4 %}
            {% if start_page < 1 %}
                {% assign start_page = 1 %}
            {% endif %}
        {% endif %}
        
        {% for page in (start_page..end_page) %}
            <li {% if page == paginator.page %}class="active"{% endif %}>
                {% if page == paginator.page %}
                <span>{{ page }}</span>
                {% else %}
                    {% if page == 1 %}
                    <a href="{{ '/index.html' | prepend: site.baseurl }}">{{ page }}</a>
                    {% else %}
                    <a href="{{ site.paginate_path | prepend: site.baseurl | replace: '//', '/' | replace: ':num', page }}">{{ page }}</a>
                    {% endif %}
                {% endif %}
            </li>
        {% endfor %}

        <!-- ä¸‹ä¸€é¡µé“¾æ¥ -->
        <li {% if paginator.next_page == nil %}class="disabled"{% endif %}>
            {% if paginator.next_page %}
            <a href="{{ paginator.next_page_path | prepend: site.baseurl | replace: '//', '/' }}">&raquo;</a>
            {% else %}
            <span>&raquo;</span>
            {% endif %}
        </li>

        <!-- æœ«é¡µé“¾æ¥ -->
        <li {% if paginator.page == paginator.total_pages %}class="disabled"{% endif %}>
            {% if paginator.page == paginator.total_pages %}
            <span>&raquo;&raquo;</span>
            {% else %}
            <a href="{{ site.paginate_path | prepend: site.baseurl | replace: '//', '/' | replace: ':num', paginator.total_pages }}">&raquo;&raquo;</a>
            {% endif %}
        </li>
    </ul>
    {% endif %}
</div>

<!-- æ·»åŠ å‡ ä½•å›¾å½¢èƒŒæ™¯è„šæœ¬ -->
<script src="{{ '/js/geometry-background.js' | prepend: site.baseurl }}"></script>
<!-- 51laç»Ÿè®¡ -->
<script charset="UTF-8" id="LA_COLLECT" src="//sdk.51.la/js-sdk-pro.min.js"></script>
<script>LA.init({id:"3M1p9Hhnk53mxLF7",ck:"3M1p9Hhnk53mxLF7"})</script>

<!-- é¡µé¢å†…å®¹ç¼“å­˜å’Œè‡ªåŠ¨æ›´æ–°è„šæœ¬ -->
<script>
  // å…¨å±€å†…å®¹ç¼“å­˜å­˜å‚¨
  const pageCache = {
    // ç¼“å­˜å†…å®¹çš„æ•°æ®ç»“æ„
    contents: {},
    // ç¼“å­˜æ—¶é—´æˆ³
    timestamps: {},
    // ç¼“å­˜æœ‰æ•ˆæœŸï¼ˆæ¯«ç§’ï¼‰
    maxAge: 3600000, // é»˜è®¤1å°æ—¶
    // ç§»åŠ¨ç«¯ç‰¹æ®Šæ ‡è¯†
    isMobile: /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),
    // è®°å½•å·²è®¿é—®é¡µé¢
    visitedPages: {},
    
    // è·å–ç¼“å­˜é”®
    getKey: function(url) {
      // å»é™¤URLä¸­çš„åˆ·æ–°å‚æ•°å’Œæ—¶é—´æˆ³
      return url.replace(/[?&]refresh=true/, '')
                .replace(/[?&]t=\d+/, '')
                .replace(/[?&]_=\d+/, '');
    },
    
    // å­˜å‚¨å†…å®¹åˆ°ç¼“å­˜
    store: function(url, content) {
      const key = this.getKey(url);
      this.contents[key] = content;
      this.timestamps[key] = Date.now();
      
      // åŒæ—¶ä¿å­˜åˆ°localStorageï¼ˆå¦‚æœå¯ç”¨ï¼‰
      try {
        const cacheObject = {
          content: content,
          timestamp: this.timestamps[key]
        };
        localStorage.setItem(`page_cache_${key}`, JSON.stringify(cacheObject));
      } catch (e) {
        console.warn('æ— æ³•å°†ç¼“å­˜å†™å…¥localStorage', e);
      }
    },
    
    // ä»ç¼“å­˜è·å–å†…å®¹
    get: function(url) {
      const key = this.getKey(url);
      
      // é¦–å…ˆæ£€æŸ¥å†…å­˜ç¼“å­˜
      if (this.contents[key] && this.timestamps[key]) {
        const age = Date.now() - this.timestamps[key];
        if (age < this.maxAge) {
          return this.contents[key];
        }
      }
      
      // å¦‚æœå†…å­˜ä¸­æ²¡æœ‰æœ‰æ•ˆç¼“å­˜ï¼Œæ£€æŸ¥localStorage
      try {
        const storedCache = localStorage.getItem(`page_cache_${key}`);
        if (storedCache) {
          const cacheObject = JSON.parse(storedCache);
          const age = Date.now() - cacheObject.timestamp;
          
          if (age < this.maxAge) {
            // å°†ç¼“å­˜åŠ è½½åˆ°å†…å­˜ä¸­
            this.contents[key] = cacheObject.content;
            this.timestamps[key] = cacheObject.timestamp;
            return cacheObject.content;
          } else {
            // æ¸…é™¤è¿‡æœŸç¼“å­˜
            localStorage.removeItem(`page_cache_${key}`);
          }
        }
      } catch (e) {
        console.warn('æ— æ³•ä»localStorageè¯»å–ç¼“å­˜', e);
      }
      
      return null;
    },
    
    // æ¸…é™¤ç‰¹å®šURLçš„ç¼“å­˜
    clear: function(url) {
      const key = this.getKey(url);
      delete this.contents[key];
      delete this.timestamps[key];
      
      try {
        localStorage.removeItem(`page_cache_${key}`);
      } catch (e) {
        console.warn('æ— æ³•ä»localStorageåˆ é™¤ç¼“å­˜', e);
      }
    },
    
    // æ¸…é™¤æ‰€æœ‰ç¼“å­˜
    clearAll: function() {
      this.contents = {};
      this.timestamps = {};
      
      try {
        // åªæ¸…é™¤æˆ‘ä»¬çš„ç¼“å­˜é¡¹ï¼Œä¸å½±å“å…¶ä»–localStorageæ•°æ®
        for (let i = 0; i < localStorage.length; i++) {
          const key = localStorage.key(i);
          if (key.startsWith('page_cache_')) {
            localStorage.removeItem(key);
          }
        }
      } catch (e) {
        console.warn('æ— æ³•æ¸…é™¤localStorageç¼“å­˜', e);
      }
    }
  };
  
  // æ£€æŸ¥URLä¸­æ˜¯å¦æœ‰å¼ºåˆ¶åˆ·æ–°å‚æ•°
  function hasRefreshParam() {
    return window.location.href.indexOf('refresh=true') > -1;
  }
  
  // æ£€æŸ¥URLä¸­æ˜¯å¦æœ‰ç¦æ­¢åˆ·æ–°å‚æ•°
  function hasNoRefreshParam() {
    return window.location.href.indexOf('no-refresh=true') > -1;
  }
  
  // é¢„åŠ è½½é¡µé¢å†…å®¹
  function preloadPageContent(url, callback) {
    // ç§»åŠ¨ç«¯é¦–é¡µæƒ…å†µä¸‹ï¼Œé™ä½é¢„åŠ è½½ä¼˜å…ˆçº§
    if (pageCache.isMobile && (url === '/' || url.indexOf('index.html') > -1)) {
      // å»¶è¿Ÿæ‰§è¡Œï¼Œå‡è½»åŠ è½½å‹åŠ›
      setTimeout(() => {
        performPreload(url, callback);
      }, 2000); // å»¶è¿Ÿ2ç§’
    } else {
      performPreload(url, callback);
    }
  }
  
  // æ‰§è¡Œå®é™…é¢„åŠ è½½
  function performPreload(url, callback) {
    // æ„å»ºé’ˆå¯¹æ¯ä¸ªé¡µé¢çš„ç¼“å­˜URL
    let cacheUrl = url;
    
    // æ·»åŠ æ—¶é—´æˆ³å‚æ•°ä»¥é¿å…ç¼“å­˜
    if (cacheUrl.indexOf('?') > -1) {
      cacheUrl += '&_=' + Date.now();
    } else {
      cacheUrl += '?_=' + Date.now();
    }
    
    fetch(cacheUrl, {
      method: 'GET',
      headers: {'X-Requested-With': 'XMLHttpRequest'},
      // ç§»åŠ¨ç«¯é™ä½ä¼˜å…ˆçº§ï¼Œå‡å°‘å¯¹ä¸»çº¿ç¨‹çš„å½±å“
      priority: pageCache.isMobile ? 'low' : 'auto'
    })
    .then(response => response.text())
    .then(html => {
      // è§£æé¡µé¢å†…å®¹
      const parser = new DOMParser();
      const doc = parser.parseFromString(html, 'text/html');
      
      // è·å–ä¸»è¦å†…å®¹éƒ¨åˆ†
      const mainContent = doc.querySelector('.main-content-container');
      
      if (mainContent) {
        // å­˜å‚¨åˆ°ç¼“å­˜
        pageCache.store(url, mainContent.innerHTML);
        
        // å¦‚æœæœ‰å›è°ƒå‡½æ•°ï¼Œæ‰§è¡Œå®ƒ
        if (callback && typeof callback === 'function') {
          callback(mainContent.innerHTML);
        }
      }
    })
    .catch(error => {
      console.warn('é¡µé¢é¢„åŠ è½½å¤±è´¥:', error);
      // å¦‚æœæœ‰å›è°ƒå‡½æ•°ï¼Œä»ç„¶æ‰§è¡Œå®ƒï¼Œä½†ä¼ é€’nullè¡¨ç¤ºå¤±è´¥
      if (callback && typeof callback === 'function') {
        callback(null);
      }
    });
  }
  
  // è‡ªåŠ¨åˆ·æ–°é¡µé¢å†…å®¹
  function autoRefreshContent(forceRefresh = false) {
    // å¦‚æœæ˜¯ç§»åŠ¨ç«¯é¦–é¡µï¼Œä¼˜åŒ–åˆ·æ–°ç­–ç•¥
    const isHomePage = window.location.pathname === '/' || window.location.pathname === '/index.html';
    
    // å½“å‰URL
    const currentUrl = pageCache.getKey(window.location.href);
    
    // å¦‚æœå¼ºåˆ¶åˆ·æ–°ï¼Œæ¸…é™¤ç¼“å­˜
    if (forceRefresh) {
      pageCache.clear(currentUrl);
    }
    
    // å°è¯•ä»ç¼“å­˜è·å–å†…å®¹
    const cachedContent = !forceRefresh ? pageCache.get(currentUrl) : null;
    
    if (cachedContent) {
      // ä½¿ç”¨ç¼“å­˜çš„å†…å®¹æ›´æ–°é¡µé¢
      const currentPosts = document.querySelector('.main-content-container');
      if (currentPosts) {
        // ä½¿ç”¨requestAnimationFrameä¼˜åŒ–DOMæ›´æ–°
        requestAnimationFrame(() => {
          currentPosts.innerHTML = cachedContent;
          
          // é¢„åŠ è½½å…¶ä»–é¡µé¢ï¼Œç§»åŠ¨ç«¯ä¸»é¡µæ—¶å‡å°‘æˆ–ç¦ç”¨é¢„åŠ è½½
          if (!(pageCache.isMobile && isHomePage)) {
            setTimeout(preloadOtherPages, 1000);
          }
        });
        
        return;
      }
    }
    
    // å¦‚æœæ²¡æœ‰å¯ç”¨çš„ç¼“å­˜ï¼Œä»æœåŠ¡å™¨è·å–æ–°å†…å®¹
    const url = forceRefresh 
      ? window.location.href + (hasRefreshParam() ? '' : (window.location.href.indexOf('?') > -1 ? '&' : '?') + 'refresh=true&t=' + new Date().getTime())
      : window.location.href;
    
    fetch(url, {
      cache: forceRefresh ? 'no-cache' : 'default',
      headers: {'X-Requested-With': 'XMLHttpRequest'},
      // ç§»åŠ¨ç«¯é™ä½ä¼˜å…ˆçº§
      priority: pageCache.isMobile ? 'low' : 'auto'
    })
    .then(response => response.text())
    .then(html => {
      // è§£æè¿”å›çš„HTML
      const parser = new DOMParser();
      const doc = parser.parseFromString(html, 'text/html');
      
      // æ›´æ–°æ–‡ç« åˆ—è¡¨éƒ¨åˆ†
      const newPosts = doc.querySelector('.main-content-container');
      const currentPosts = document.querySelector('.main-content-container');
      
      if (newPosts && currentPosts) {
        // æ£€æŸ¥å†…å®¹æ˜¯å¦çœŸçš„æœ‰å˜åŒ–æˆ–å¼ºåˆ¶åˆ·æ–°
        if (forceRefresh || newPosts.innerHTML !== currentPosts.innerHTML) {
          // åªæ›´æ–°å†…å®¹éƒ¨åˆ†ï¼Œä¸é‡è½½æ•´ä¸ªé¡µé¢
          currentPosts.innerHTML = newPosts.innerHTML;
          
          // å°†æ–°å†…å®¹å­˜å‚¨åˆ°ç¼“å­˜
          pageCache.store(currentUrl, newPosts.innerHTML);
          
          // é¢„åŠ è½½å…¶ä»–é¡µé¢
          setTimeout(preloadOtherPages, 1000);
        }
      }
    })
    .catch(error => {
      console.error("åˆ·æ–°å†…å®¹æ—¶å‘ç”Ÿé”™è¯¯:", error);
    });
  }
  
  // é¢„åŠ è½½æ‰€æœ‰ç›¸å…³é¡µé¢
  function preloadOtherPages() {
    // ç§»åŠ¨ç«¯é¦–é¡µæ—¶ï¼Œå‡å°‘æˆ–ç¦ç”¨é¢„åŠ è½½
    if (pageCache.isMobile && (window.location.pathname === '/' || window.location.pathname === '/index.html')) {
      // ç§»åŠ¨ç«¯é¦–é¡µæ—¶ï¼Œåªé¢„åŠ è½½ä¸‹ä¸€é¡µï¼Œå‡å°‘èµ„æºæ¶ˆè€—
      const nextPageLink = document.querySelector('.pagination .next a');
      if (nextPageLink && nextPageLink.href) {
        const nextPageUrl = pageCache.getKey(nextPageLink.href);
        if (!pageCache.get(nextPageUrl)) {
          preloadPageContent(nextPageUrl);
        }
      }
      return;
    }
    
    // æ¡Œé¢ç«¯æˆ–éé¦–é¡µçš„å¸¸è§„é¢„åŠ è½½é€»è¾‘
    // è·å–æ‰€æœ‰é“¾æ¥
    const links = document.querySelectorAll('a');
    const internalLinks = new Set();
    const baseUrl = '{{ site.baseurl }}';
    const domain = window.location.origin;
    
    // æ”¶é›†æ‰€æœ‰å†…éƒ¨é“¾æ¥
    links.forEach(link => {
      if (link.href && (link.href.startsWith(domain) || link.href.startsWith(baseUrl) || link.href.startsWith('/'))) {
        // åªå¤„ç†ç›¸å¯¹è·¯å¾„å†…éƒ¨é“¾æ¥å’Œåˆ†é¡µé“¾æ¥
        if (link.href.indexOf('/page/') > -1 || link.href.indexOf('index.html') > -1 || 
            link.href === domain + '/' || link.href === baseUrl + '/' || link.href === '/') {
          internalLinks.add(pageCache.getKey(link.href));
        }
      }
    });
    
    // é¢„åŠ è½½æ‰€æœ‰å†…éƒ¨é“¾æ¥ï¼ˆæ¡Œé¢æœ€å¤š5ä¸ªï¼Œç§»åŠ¨ç«¯æœ€å¤š2ä¸ªï¼Œé¿å…è¿‡å¤šè¯·æ±‚ï¼‰
    let maxPreloads = pageCache.isMobile ? 2 : 5;
    let count = 0;
    for (const link of internalLinks) {
      if (count >= maxPreloads) break;
      
      // åªé¢„åŠ è½½å°šæœªç¼“å­˜çš„é¡µé¢
      if (!pageCache.get(link)) {
        preloadPageContent(link);
        count++;
      }
    }
  }
  
  // ä¿®æ”¹æ‰€æœ‰å†…éƒ¨é“¾æ¥ï¼Œä¼˜åŒ–ç‚¹å‡»ä½“éªŒ
  function modifyInternalLinks() {
    const domain = window.location.origin;
    const baseUrl = '{{ site.baseurl }}';
    const links = document.querySelectorAll('a');
    
    links.forEach(link => {
      // åªå¤„ç†å†…éƒ¨é“¾æ¥
      if (link.href && (link.href.startsWith(domain) || link.href.startsWith(baseUrl) || link.href.startsWith('/'))) {
        // æ ‡è®°é“¾æ¥å·²å¤„ç†ï¼Œé˜²æ­¢é‡å¤æ·»åŠ äº‹ä»¶
        if (link.getAttribute('data-enhanced') === 'true') {
          return;
        }
        link.setAttribute('data-enhanced', 'true');
        
        // ä¿å­˜åŸå§‹çš„ç‚¹å‡»äº‹ä»¶
        const originalClick = link.onclick;
        
        // æ·»åŠ æ–°çš„ç‚¹å‡»äº‹ä»¶å¤„ç†
        link.onclick = function(e) {
          const targetUrl = pageCache.getKey(link.href);
          
          // è®°å½•é“¾æ¥URL
          sessionStorage.setItem('lastClickUrl', targetUrl);
          
          // æ£€æŸ¥æ˜¯å¦å·²è®¿é—®è¿‡è¯¥é¡µé¢ï¼ˆæœ‰ç¼“å­˜ï¼‰
          const cachedContent = pageCache.get(targetUrl);
          const isPageVisited = pageCache.visitedPages[targetUrl] === true;
          const isInternalPageLink = link.href.indexOf('/page/') > -1 || 
                                    link.href.indexOf('index.html') > -1 || 
                                    link.href === domain + '/' || 
                                    link.href === baseUrl + '/' || 
                                    link.href === '/';
          
          // å¦‚æœæœ‰ç¼“å­˜å¹¶ä¸”æ˜¯å†…éƒ¨é¡µé¢é“¾æ¥
          if (cachedContent && isInternalPageLink) {
            // é˜»æ­¢é»˜è®¤è¡Œä¸º
            e.preventDefault();
            
            // åº”ç”¨ç¼“å­˜å†…å®¹
            const currentPosts = document.querySelector('.main-content-container');
            if (currentPosts) {
              // ä½¿ç”¨requestAnimationFrameä¼˜åŒ–DOMæ›´æ–°
              requestAnimationFrame(() => {
                currentPosts.innerHTML = cachedContent;
                
                // æ›´æ–°URLä½†ä¸åˆ·æ–°é¡µé¢
                if (window.history && window.history.pushState) {
                  window.history.pushState({
                    url: link.href,
                    cached: true
                  }, document.title, link.href);
                }
                
                // æ ‡è®°ä¸éœ€è¦åˆ·æ–°
                sessionStorage.setItem('needsRefresh', 'false');
                
                // è®°å½•å·²è®¿é—®
                pageCache.visitedPages[targetUrl] = true;
                try {
                  localStorage.setItem('visitedPages', JSON.stringify(pageCache.visitedPages));
                } catch (e) {
                  console.warn('æ— æ³•ä¿å­˜è®¿é—®å†å²', e);
                }
              });
            }
            return false;
          }
          
          // å¯¹äºå·²è®¿é—®è¿‡çš„é¡µé¢ï¼Œç¦æ­¢åˆ·æ–°å‚æ•°
          if (isPageVisited) {
            // ç§»é™¤refreshå‚æ•°ï¼Œç¡®ä¿ä½¿ç”¨ç¼“å­˜
            let cleanHref = link.href.replace(/[?&]refresh=true/, '').replace(/[?&]t=\d+/, '');
            
            // æ·»åŠ no-refreshæ ‡è®°
            const separator = cleanHref.indexOf('?') > -1 ? '&' : '?';
            link.href = cleanHref + separator + 'no-refresh=true';
            
            // è®¾ç½®ä¼šè¯æ ‡å¿—ï¼Œè¡¨ç¤ºä¸éœ€è¦åˆ·æ–°
            sessionStorage.setItem('needsRefresh', 'false');
          } else if (link.href.indexOf('refresh=true') === -1 && link.href.indexOf('no-refresh=true') === -1) {
            // å¯¹äºé¦–æ¬¡è®¿é—®çš„é¡µé¢ï¼Œæ·»åŠ åˆ·æ–°å‚æ•°
            const separator = link.href.indexOf('?') > -1 ? '&' : '?';
            link.href = link.href + separator + 'refresh=true';
          }
          
          // è°ƒç”¨åŸå§‹ç‚¹å‡»äº‹ä»¶å¤„ç†ï¼ˆå¦‚æœæœ‰ï¼‰
          if (originalClick) {
            return originalClick.call(this, e);
          }
        };
      }
    });
  }

  // é¡µé¢åŠ è½½å®Œæˆåç«‹å³æ‰§è¡Œåˆå§‹åŒ–
  document.addEventListener('DOMContentLoaded', function() {
    // ç§»åŠ¨ç«¯æ£€æµ‹å’Œä¼˜åŒ–
    const isMobile = pageCache.isMobile;
    const isHomePage = window.location.pathname === '/' || window.location.pathname === '/index.html';
    
    // å°è¯•ä»localStorageæ¢å¤è®¿é—®å†å²
    try {
      const visitedPagesJson = localStorage.getItem('visitedPages');
      if (visitedPagesJson) {
        pageCache.visitedPages = JSON.parse(visitedPagesJson);
      }
    } catch (e) {
      console.warn('æ— æ³•æ¢å¤è®¿é—®å†å²', e);
      pageCache.visitedPages = {};
    }
    
    // æ£€æŸ¥æœ¬åœ°ç¼“å­˜ï¼Œç¡®ä¿é¦–æ¬¡åŠ è½½èƒ½ä»ç¼“å­˜è·å–
    const currentUrl = pageCache.getKey(window.location.href);
    let cachedContent = pageCache.get(currentUrl);
    
    // æ ‡è®°å½“å‰é¡µé¢å·²è®¿é—®
    pageCache.visitedPages[currentUrl] = true;
    try {
      localStorage.setItem('visitedPages', JSON.stringify(pageCache.visitedPages));
    } catch (e) {
      console.warn('æ— æ³•ä¿å­˜è®¿é—®å†å²', e);
    }
    
    // å¦‚æœæ‰¾åˆ°æœ‰æ•ˆç¼“å­˜ï¼Œç«‹å³ä½¿ç”¨å®ƒ
    if (cachedContent) {
      const contentContainer = document.querySelector('.main-content-container');
      if (contentContainer) {
        // ä½¿ç”¨requestAnimationFrameä¼˜åŒ–DOMæ›´æ–°
        requestAnimationFrame(() => {
          contentContainer.innerHTML = cachedContent;
        });
      }
    }
    
    // æ£€æŸ¥æ˜¯å¦éœ€è¦å¼ºåˆ¶åˆ·æ–°ï¼ˆæ¥è‡ªå…¶ä»–é¡µé¢è·³è½¬ï¼‰
    const needsForceRefresh = hasRefreshParam() || (sessionStorage.getItem('needsRefresh') === 'true' && !hasNoRefreshParam());
    
    // æ£€æŸ¥æ˜¯å¦æ˜¯ä»å†…éƒ¨é¡µé¢è¿”å›ä¸»é¡µ
    const isReturningToHomePage = isHomePage && 
                                 sessionStorage.getItem('lastVisitedPage') && 
                                 sessionStorage.getItem('homePageCacheApplied') === 'true';
    
    // æ£€æŸ¥æ˜¯å¦æ˜¯å·²è®¿é—®è¿‡çš„é¡µé¢
    const isVisitedPage = pageCache.visitedPages[currentUrl] === true && !hasRefreshParam();
    
    // åªæœ‰åœ¨éœ€è¦åˆ·æ–°çš„æƒ…å†µä¸‹æ‰æ‰§è¡Œåˆ·æ–°
    if (!isReturningToHomePage && !isVisitedPage) {
      // æ‰§è¡Œåˆ·æ–°
      autoRefreshContent(needsForceRefresh);
    } else {
      console.log('ä½¿ç”¨ç¼“å­˜å†…å®¹ï¼Œä¸åˆ·æ–°');
      
      // ä»URLä¸­ç§»é™¤åˆ·æ–°å‚æ•°
      if ((hasRefreshParam() || hasNoRefreshParam()) && window.history && window.history.replaceState) {
        const cleanUrl = window.location.href
          .replace(/[?&]refresh=true/, '')
          .replace(/[?&]no-refresh=true/, '')
          .replace(/[?&]t=\d+/, '');
        window.history.replaceState({}, document.title, cleanUrl);
      }
    }
    
    // é‡ç½®åˆ·æ–°æ ‡å¿—
    sessionStorage.setItem('needsRefresh', 'false');
    
    // ä¿®æ”¹æ‰€æœ‰å†…éƒ¨é“¾æ¥
    modifyInternalLinks();
    
    // ç›‘å¬é¡µé¢å¯è§æ€§å˜åŒ–ï¼ˆå½“ç”¨æˆ·ä»å…¶ä»–æ ‡ç­¾é¡µå›åˆ°æ­¤é¡µé¢æ—¶ï¼‰
    document.addEventListener('visibilitychange', function() {
      if (document.visibilityState === 'visible') {
        // ç”¨æˆ·å›åˆ°é¡µé¢ï¼Œæ£€æŸ¥ç¼“å­˜æ˜¯å¦ä»ç„¶æœ‰æ•ˆ
        if (pageCache.get(currentUrl)) {
          // å¦‚æœç¼“å­˜æœ‰æ•ˆï¼Œæ£€æŸ¥æ›´æ–°ä½†ä¸å¼ºåˆ¶åˆ·æ–°
          autoRefreshContent(false);
        } else {
          // å¦‚æœç¼“å­˜è¿‡æœŸï¼Œæ‰§è¡Œå¼ºåˆ¶åˆ·æ–°
          autoRefreshContent(true);
        }
      }
    });
    
    // ç›‘å¬æµè§ˆå™¨å‰è¿›/åé€€äº‹ä»¶
    window.addEventListener('popstate', function(event) {
      // è·å–å†å²çŠ¶æ€
      const state = event.state || {};
      
      // è·å–å½“å‰URLçš„ç¼“å­˜å†…å®¹
      const newUrl = pageCache.getKey(window.location.href);
      const cacheContent = pageCache.get(newUrl);
      
      // å¦‚æœæœ‰ç¼“å­˜ï¼Œæˆ–è€…çŠ¶æ€æ ‡è®°ä¸ºå·²ç¼“å­˜
      if (cacheContent || state.cached) {
        // åº”ç”¨ç¼“å­˜å†…å®¹è€Œä¸é‡æ–°åŠ è½½
        const contentContainer = document.querySelector('.main-content-container');
        if (contentContainer) {
          // ä½¿ç”¨requestAnimationFrameä¼˜åŒ–DOMæ›´æ–°
          requestAnimationFrame(() => {
            contentContainer.innerHTML = cacheContent;
          });
        }
      } else {
        // å¦‚æœæ²¡æœ‰ç¼“å­˜ï¼Œåˆ·æ–°å½“å‰é¡µé¢
        autoRefreshContent(true);
      }
    });
    
    // ä¹‹åæ¯éš”ä¸€æ®µæ—¶é—´æ£€æŸ¥ä¸€æ¬¡æ›´æ–°ï¼Œç§»åŠ¨ç«¯é™ä½é¢‘ç‡
    const refreshInterval = isMobile ? 120000 : 60000; // ç§»åŠ¨ç«¯2åˆ†é’Ÿï¼Œæ¡Œé¢ç«¯1åˆ†é’Ÿ
    setInterval(() => autoRefreshContent(false), refreshInterval);
  });
  
  // ç”¨æˆ·ç¦»å¼€å½“å‰é¡µé¢æ—¶ï¼Œè®¾ç½®åˆ·æ–°æ ‡å¿—
  window.addEventListener('beforeunload', function(e) {
    // åªæœ‰åœ¨éä¸»é¡µæ—¶æ‰è®¾ç½®åˆ·æ–°æ ‡å¿—
    if (!(window.location.pathname === '/' || window.location.pathname === '/index.html')) {
      // å°†å½“å‰é¡µé¢æ ‡è®°ä¸ºæœ€åè®¿é—®çš„é¡µé¢
      const currentUrl = pageCache.getKey(window.location.href);
      sessionStorage.setItem('lastVisitedPage', currentUrl);
      sessionStorage.setItem('needsRefresh', 'true');
    } else {
      // åœ¨ä¸»é¡µé¢æ—¶ï¼Œä¸è®¾ç½®åˆ·æ–°æ ‡å¿—ï¼Œä¿æŒç¼“å­˜
      sessionStorage.setItem('needsRefresh', 'false');
    }
  });
</script>

<!-- æ·»åŠ ä¸»é¡µé¢ç¼“å­˜ä¼˜åŒ–è„šæœ¬ -->
<script>
// ä¸»é¡µç‰¹æ®Šç¼“å­˜å¤„ç†
(function() {
  // ä¿å­˜éŸ³ä¹æ’­æ”¾å™¨çŠ¶æ€åˆ°localStorageï¼Œä½¿å…¶åœ¨åˆ·æ–°åä¿æŒ
  try {
    // è·å–æ’­æ”¾å™¨çŠ¶æ€
    const musicPlayerSrc = sessionStorage.getItem('musicPlayerSrc') || '';
    const musicPlayerInitialized = sessionStorage.getItem('musicPlayerInitialized') || 'false';
    
    // ä¿å­˜åˆ°localStorageä»¥åœ¨åˆ·æ–°åæ¢å¤
    if (musicPlayerInitialized === 'true' && musicPlayerSrc) {
      localStorage.setItem('musicPlayerSrc', musicPlayerSrc);
      localStorage.setItem('musicPlayerInitialized', 'true');
    }
    
    // ä»localStorageæ¢å¤åˆ°sessionStorageï¼ˆåˆ·æ–°åï¼‰
    if (!sessionStorage.getItem('musicPlayerSrc') && localStorage.getItem('musicPlayerSrc')) {
      sessionStorage.setItem('musicPlayerSrc', localStorage.getItem('musicPlayerSrc'));
      sessionStorage.setItem('musicPlayerInitialized', localStorage.getItem('musicPlayerInitialized') || 'false');
    }
  } catch (e) {
    console.warn('ä¿å­˜/æ¢å¤éŸ³ä¹æ’­æ”¾å™¨çŠ¶æ€å¤±è´¥', e);
  }
  
  const isHomePage = window.location.pathname === '/' || window.location.pathname === '/index.html';
  const lastPage = sessionStorage.getItem('lastVisitedPage') || '';
  const cameFromInternalPage = lastPage.includes(window.location.hostname) || lastPage.startsWith('/');
  
  // å¦‚æœæ˜¯ä¸»é¡µä¸”æ˜¯ä»å†…éƒ¨é¡µé¢è¿”å›çš„ï¼Œä½¿ç”¨ç¼“å­˜ç‰ˆæœ¬
  if (isHomePage && cameFromInternalPage) {
    // æ ‡è®°å·²ç»å¤„ç†è¿‡ï¼Œé¿å…é‡å¤å¤„ç†
    sessionStorage.setItem('homePageCacheApplied', 'true');
    
    // ä½¿ç”¨Performance APIæ£€æµ‹å¯¼èˆªç±»å‹
    if (window.performance && performance.navigation) {
      if (performance.navigation.type === 2) { // 2è¡¨ç¤ºé€šè¿‡åé€€/å‰è¿›æŒ‰é’®å¯¼èˆª
        console.log('é€šè¿‡åé€€/å‰è¿›è¿”å›ä¸»é¡µï¼Œä¿æŒç¼“å­˜å†…å®¹');
        // é˜»æ­¢é¡µé¢é‡æ–°åŠ è½½
        sessionStorage.setItem('needsRefresh', 'false');
        
        // ç›´æ¥ä»ç¼“å­˜è·å–å†…å®¹
        const currentUrl = window.location.href.split('?')[0]; // ä¸å«å‚æ•°çš„URL
        try {
          // æ£€æŸ¥æ˜¯å¦æœ‰æœ¬åœ°ç¼“å­˜
          const cachedContent = pageCache.get(currentUrl);
          if (cachedContent) {
            const contentContainer = document.querySelector('.main-content-container');
            if (contentContainer) {
              // åº”ç”¨ç¼“å­˜å†…å®¹
              contentContainer.innerHTML = cachedContent;
              console.log('å·²åº”ç”¨æœ¬åœ°ç¼“å­˜çš„ä¸»é¡µå†…å®¹');
            }
          }
        } catch (e) {
          console.warn('åº”ç”¨ç¼“å­˜å†…å®¹æ—¶å‡ºé”™:', e);
        }
      }
    }
    
    // ä»æµè§ˆå™¨ç¼“å­˜ä¸­è·å–ä¸»é¡µ
    if ('caches' in window) {
      caches.open('homepage-cache').then(cache => {
        const homepageUrl = window.location.href.split('?')[0]; // ä¸å«å‚æ•°çš„URL
        cache.match(homepageUrl).then(response => {
          if (response) {
            console.log('ä¸»é¡µå·²å­˜åœ¨äºæµè§ˆå™¨ç¼“å­˜ä¸­');
          } else {
            // å¦‚æœä¸å­˜åœ¨åˆ™æ·»åŠ 
            cache.add(homepageUrl).then(() => {
              console.log('ä¸»é¡µå·²æ·»åŠ åˆ°æµè§ˆå™¨ç¼“å­˜');
            });
          }
        });
      }).catch(err => {
        console.warn('ç¼“å­˜æ“ä½œå¤±è´¥:', err);
      });
    }
  } else if (isHomePage) {
    // é¦–æ¬¡åŠ è½½ä¸»é¡µï¼Œå­˜å‚¨åˆ°æµè§ˆå™¨ç¼“å­˜
    sessionStorage.removeItem('homePageCacheApplied');
    if ('caches' in window) {
      const homepageUrl = window.location.href.split('?')[0]; // ä¸å«å‚æ•°çš„URL
      caches.open('homepage-cache').then(cache => {
        // å…ˆæ£€æŸ¥ç¼“å­˜ä¸­æ˜¯å¦å­˜åœ¨
        cache.match(homepageUrl).then(response => {
          if (!response) {
            // ä¸å­˜åœ¨åˆ™æ·»åŠ 
            cache.add(homepageUrl).then(() => {
              console.log('ä¸»é¡µé¦–æ¬¡æ·»åŠ åˆ°æµè§ˆå™¨ç¼“å­˜');
            });
          } else {
            // å­˜åœ¨åˆ™æ›´æ–°
            cache.delete(homepageUrl).then(() => {
              cache.add(homepageUrl).then(() => {
                console.log('ä¸»é¡µç¼“å­˜å·²æ›´æ–°');
              });
            });
          }
        });
      }).catch(err => {
        console.warn('åˆå§‹ç¼“å­˜æ“ä½œå¤±è´¥:', err);
      });
    }
    
    // åŒæ—¶ä¿å­˜åˆ°æœ¬åœ°ç¼“å­˜ç³»ç»Ÿ
    const currentUrl = pageCache.getKey(window.location.href);
    const mainContent = document.querySelector('.main-content-container');
    if (mainContent) {
      pageCache.store(currentUrl, mainContent.innerHTML);
      console.log('ä¸»é¡µå†…å®¹å·²ä¿å­˜åˆ°æœ¬åœ°ç¼“å­˜');
    }
  }
})();
</script>

<!-- ç®€å•è„šæœ¬ï¼šå‡å°‘ä¸»é¡µå†…å®¹ä¸èƒŒæ™¯ä¹‹é—´çš„ç©ºç™½ -->
<script>
  document.addEventListener('DOMContentLoaded', function() {
    // æˆ‘ä»¬ä»…åœ¨é¦–é¡µåšè¿™äº›è°ƒæ•´
    if (window.location.pathname === '/' || window.location.pathname === '/index.html') {
      // ç¡®ä¿å†…å®¹å®¹å™¨ç›´æ¥è·Ÿéšåœ¨èƒŒæ™¯å›¾ç‰‡åé¢
      var contentContainer = document.querySelector('.main-content-container');
      if (contentContainer) {
        // ç›´æ¥å¯¹å®¹å™¨åº”ç”¨æ ·å¼ï¼Œä¸æ·»åŠ ä»»ä½•æ–°å…ƒç´ 
        contentContainer.style.marginTop = '-2px'; // å¾®å°çš„è´Ÿè¾¹è·æ¶ˆé™¤ç©ºéš™
      }
      
      // ç§»åŠ¨ç«¯æ»šåŠ¨æ€§èƒ½ä¼˜åŒ–
      if (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {
        // å¯¹é¡µé¢æ·»åŠ å¹³æ»‘æ»šåŠ¨æ ·å¼
        document.body.style.cssText += '-webkit-overflow-scrolling: touch;';
        
        // è®¾ç½®ä¸»å†…å®¹å®¹å™¨GPUåŠ é€Ÿ
        if (contentContainer) {
          contentContainer.style.transform = 'translateZ(0)';
          contentContainer.style.willChange = 'transform';
        }
        
        // å‡å°‘ç§»åŠ¨ç«¯å¯èƒ½å‡ºç°çš„é—ªçƒé—®é¢˜
        var styleElement = document.createElement('style');
        styleElement.textContent = `
          /* ç§»åŠ¨ç«¯ä¼˜åŒ– */
          body {
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            touch-action: auto !important;
            overflow: auto !important;
          }
          
          /* ä½¿ç”¨æ›´é«˜æ€§èƒ½çš„åŠ¨ç”»å±æ€§ */
          .post-preview, .pagination, .music-player-container {
            will-change: transform;
            transform: translateZ(0);
          }
          
          /* ä¼˜åŒ–æ»šåŠ¨å®¹å™¨ */
          .main-content-container {
            -webkit-overflow-scrolling: touch;
            overflow-y: auto !important;
            overscroll-behavior-y: auto;
            height: auto !important;
            touch-action: auto !important;
            position: relative;
            z-index: 10;
          }
          
          /* å‡å°‘hoverçŠ¶æ€å¼•èµ·çš„é‡ç»˜ */
          @media (max-width: 767px) {
            a:hover {
              transition: none !important;
            }
            
            /* å‡å°‘å›¾å½¢èƒŒæ™¯å¯¹ç§»åŠ¨ç«¯æ»šåŠ¨æ€§èƒ½çš„å½±å“ */
            #geometry-background {
              will-change: transform;
              transform: translateZ(0);
              opacity: 0.8; /* ç¨å¾®é™ä½é€æ˜åº¦ï¼Œå‡è½»æ¸²æŸ“å‹åŠ› */
              pointer-events: none;
              z-index: 1;
            }
            
            html, body {
              overflow: auto !important;
              height: auto !important;
              position: relative !important;
              touch-action: auto !important;
            }
          }
        `;
        document.head.appendChild(styleElement);
        
        // ç§»é™¤å¯èƒ½å¯¼è‡´æ»šåŠ¨é—®é¢˜çš„è®¾ç½®
        document.documentElement.style.overscrollBehavior = 'auto';
        document.body.style.overflow = 'auto';
        document.body.style.height = 'auto';
        document.documentElement.style.overflow = 'auto';
        document.documentElement.style.height = 'auto';
        
        // å¤„ç†è§¦æ‘¸ç›¸å…³äº‹ä»¶ï¼Œç¡®ä¿å…è®¸æ»šåŠ¨
        document.addEventListener('touchmove', function(e) {
          // ä¸é˜»æ­¢ä»»ä½•é»˜è®¤æ»šåŠ¨è¡Œä¸º
        }, { passive: true });
        
        // ä¿®å¤100msåå†æ¬¡æ£€æŸ¥æ»šåŠ¨é—®é¢˜
        setTimeout(function() {
          // ç¡®ä¿æ»šåŠ¨å®¹å™¨å¯ä»¥æ»šåŠ¨
          var contentContainer = document.querySelector('.main-content-container');
          if (contentContainer) {
            contentContainer.style.overflow = 'auto';
            contentContainer.style.touchAction = 'auto';
          }
          
          // é‡ç½®æ–‡æ¡£æ»šåŠ¨è®¾ç½®
          document.documentElement.style.overflow = 'auto';
          document.body.style.overflow = 'auto';
          
          // ç¡®ä¿èƒŒæ™¯ä¸ä¼šé˜»æ­¢è§¦æ‘¸äº‹ä»¶
          var bgElement = document.getElementById('geometry-background');
          if (bgElement) {
            bgElement.style.pointerEvents = 'none';
          }
        }, 100);
      }
    }
  });
</script>

<!-- æ·»åŠ äºŒæ¬¡å…ƒè£…é¥°å…ƒç´ çš„åŠ¨ç”»æ•ˆæœ -->
<script>
document.addEventListener('DOMContentLoaded', function() {
  // åˆ›å»ºæµ®åŠ¨è£…é¥°å…ƒç´ 
  const createFloatingElements = () => {
    const decorElements = ['ğŸŒŸ', 'ğŸ’–', 'ğŸ€', 'âœ¨', 'ğŸŒ¸', 'ğŸ°', 'ğŸ­'];
    const container = document.querySelector('.main-content-container');
    
    if (!container) return;
    
    // åˆ›å»º5-8ä¸ªéšæœºè£…é¥°å…ƒç´ 
    const elemCount = Math.floor(Math.random() * 4) + 5;
    
    for (let i = 0; i < elemCount; i++) {
      const elem = document.createElement('div');
      const randomEmoji = decorElements[Math.floor(Math.random() * decorElements.length)];
      elem.textContent = randomEmoji;
      elem.style.position = 'absolute';
      elem.style.fontSize = (Math.random() * 15 + 15) + 'px';
      elem.style.opacity = (Math.random() * 0.4 + 0.6).toString();
      elem.style.color = '#' + Math.floor(Math.random()*16777215).toString(16);
      
      // éšæœºä½ç½®ï¼ˆå®¹å™¨å¤–å›´ï¼‰
      const isTop = Math.random() > 0.5;
      const isLeft = Math.random() > 0.5;
      
      if (isTop) {
        elem.style.top = (Math.random() * 40 - 50) + 'px';
      } else {
        elem.style.bottom = (Math.random() * 40 - 50) + 'px';
      }
      
      if (isLeft) {
        elem.style.left = (Math.random() * (container.offsetWidth - 30)) + 'px';
      } else {
        elem.style.right = (Math.random() * (container.offsetWidth - 30)) + 'px';
      }
      
      // æ—‹è½¬è§’åº¦
      elem.style.transform = `rotate(${Math.random() * 40 - 20}deg)`;
      
      // æ·»åŠ æµ®åŠ¨åŠ¨ç”»ï¼Œä½†æ¯ä¸ªåŠ¨ç”»æ—¶é•¿å’Œå»¶è¿Ÿç•¥æœ‰å·®å¼‚
      elem.style.animation = `float ${Math.random() * 2 + 4}s ease-in-out ${Math.random() * 2}s infinite`;
      
      // æ·»åŠ åˆ°å®¹å™¨
      container.appendChild(elem);
    }
  };
  
  // åœ¨éç§»åŠ¨è®¾å¤‡æ‰æ·»åŠ è£…é¥°å…ƒç´ ï¼ˆé¿å…ç§»åŠ¨è®¾å¤‡æ€§èƒ½é—®é¢˜ï¼‰
  if (!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {
    createFloatingElements();
  }
  
  // é¼ æ ‡ç»è¿‡æ–‡ç« æ—¶æ·»åŠ é—ªå…‰æ•ˆæœ
  const posts = document.querySelectorAll('.post-preview');
  posts.forEach(post => {
    post.addEventListener('mouseenter', function() {
      const sparkle = document.createElement('div');
      sparkle.innerHTML = 'âœ¨';
      sparkle.style.position = 'absolute';
      sparkle.style.top = '-10px';
      sparkle.style.left = '20px';
      sparkle.style.fontSize = '20px';
      sparkle.style.opacity = '0';
      sparkle.style.transition = 'all 0.5s ease';
      
      post.appendChild(sparkle);
      
      // æ·¡å…¥æ•ˆæœ
      setTimeout(() => {
        sparkle.style.opacity = '1';
        sparkle.style.transform = 'translateY(-10px) scale(1.2)';
      }, 10);
      
      // æ·¡å‡ºæ•ˆæœ
      setTimeout(() => {
        sparkle.style.opacity = '0';
        setTimeout(() => {
          sparkle.remove();
        }, 500);
      }, 1000);
    });
  });
});
</script>
